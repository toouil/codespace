import{j as e,Y as g,r as x,a as l}from"./app-xtGLZL-7.js";import{u as o}from"./useApi-DH0F1Rzl.js";import{A as v}from"./AuthenticatedLayout-BWzqmOdx.js";import{L as b}from"./Loader-Br331SDq.js";import{N as L}from"./NotFound-BrCcBTbO.js";import"./index-BIcDevOB.js";function k({categories:s}){var r,m,u;const[t,_]=x.useState(null),j=a=>{c("category",JSON.parse(a.target.value))},{data:n,setData:c,getRequest:f,fetched:p,fetching:N}=o({dataTemplate:{category:s[0]},onSuccess:a=>{(a==null?void 0:a.status)==200&&_(a==null?void 0:a.data)}});return x.useEffect(()=>{var a;s&&f(route("scores.get"),{category:(a=n==null?void 0:n.category)==null?void 0:a.name})},[n]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"leaderboard_page",children:[e.jsxs("div",{className:"leaderboard_header",children:[e.jsx("div",{className:"leaderboard_header_left_part",children:e.jsx("h1",{className:"leaderboard_title",children:"Leaderboard"})}),e.jsx("div",{className:"leaderboard_header_right_part",children:e.jsx("select",{onChange:a=>j(a),name:"score_category",id:"score_category",defaultValue:(r=n==null?void 0:n.category)==null?void 0:r.name,className:"container",children:s&&s.map((a,i)=>{var d;return e.jsx("option",{value:JSON.stringify(a),defaultValue:(a==null?void 0:a.name.toLowerCase())==((d=n==null?void 0:n.category)==null?void 0:d.name.toLowerCase()),children:a==null?void 0:a.name},i)})})})]}),e.jsx("div",{className:"leaderboard_scores",children:t&&(t==null?void 0:t.scores.map((a,i)=>{var d,h;return e.jsxs("div",{className:`leaderboard_score_container container rank_${a==null?void 0:a.rank}${((d=t==null?void 0:t.userscore)==null?void 0:d.id)==(a==null?void 0:a.id)?" user_score":""}`,children:[e.jsxs("div",{className:"rand_and_info",children:[e.jsx("div",{className:"score_rank",children:e.jsx("p",{children:a==null?void 0:a.rank})}),e.jsxs("div",{className:"score_user_info content_center",children:[e.jsx(l,{href:`/profile/${a==null?void 0:a.username}`,className:"user_img_link",children:e.jsx("img",{src:a==null?void 0:a.picture,alt:a==null?void 0:a.username})}),e.jsx(l,{href:`/profile/${a==null?void 0:a.username}`,className:"user_name_link",children:a==null?void 0:a.username})," ",((h=t==null?void 0:t.userscore)==null?void 0:h.id)==(a==null?void 0:a.id)&&e.jsx("span",{className:"you",children:"(You)"})]})]}),e.jsxs("div",{className:"score_pointes",children:[!!(a!=null&&a.passed)&&e.jsx("img",{src:n.category.profile_badge,alt:"score baadge"}),e.jsx("p",{children:a==null?void 0:a.score})]})]},i)}))}),!(t!=null&&t.userscore)&&p&&e.jsx("div",{className:"leaderboard_didnt_passtest container",children:e.jsxs("div",{className:"didnt_passtest_message",children:[e.jsx("p",{children:"You haven't passed the test yet"}),e.jsx(l,{href:`/categories/${(m=n==null?void 0:n.category)==null?void 0:m.name}`,className:"passtest_link content_center",children:`Start ${(u=n==null?void 0:n.category)==null?void 0:u.name} test`})]})})]}),N&&e.jsx(b,{text:"Loading scores ..."})]})}function R({auth:s,categories:t}){return e.jsxs(v,{user:s.user,children:[e.jsx(g,{title:"Leaderboard"}),t&&t.length>0?e.jsx(k,{categories:t}):e.jsx(L,{text:"No categories found to get scores"})]})}export{R as default};
